title: 微信小程序(一)
author: 小小冰弟
tags: study
categories: 微信小程序
date: 2018-12-12 11:36:14
---
#### 微信小程序之一个简单表单提交应用
----
###### *前言：因为工作需要做一个表单应用（其实是因为之前的map应用做的很差），正好继续开发小程序了，不过之前一直忘记写了，今天把遇到的问题一起顺带记录吧！*

----
###### 1.微信小程序的使用

1.注册小程序开发，然后下载微信开发者工具。
2.创建项目目录，输入注册小程序获取的APPID.

###### 2.页面介绍

app.json中管理页面，你只需要page中添加即可

```
         "pages":[
        "pages/index/index",
        "pages/logs/logs"
     ],
```

如上面所示便会生成一个index文件夹，下面有四个文件：
- index.js
- index.json
- index.wxml
- index.wxss

***这里一个小说明关于路径，在index.js中../../就到达了根路径，所以拿到util.js为../../util/util.js***
**index.js主要就是添加函数的地方，里面需要具体说的主要是page中的内容**

首先让我们看一看data中的内容：

```

Page({
  data: {
    date: '',//这些变量在前台的引用就是{{date}}
    array:["日本鹌鹑", "环颈雉", "小天鹅", "赤麻鸭"],//数组
    objectArray: [
      {
        id: 0,
        name: '观鸟亭'
      },
      {
        id: 1,
        name: '观鸟屋'
      },//json字符串

    ],

    
  },
  ```
 再看一看page中的函数
 
```
  //日期选择器
  bindDateChange: function (e) {
    console.log('picker发送选择改变，携带值为', e.detail.value)
    //formdate = e.detail.value;
    this.setData({
      date: e.detail.value
    })
     this.upload(res.data.id)//这里便是调用了另外一个参数，并且传递了参数
  },//一般函数名都是对应标签的中填写的函数名，e.detail.value拿到了当前值
  ```
 
 这里要注意的是有的时候this拿不到值，所以一般函数第一句可能是
 ```
   var that = this;
   ```
 用that来完成取值设值操作。
 ***还有与后台的交互***
 ```
  wx.request({
        url: '请求地址',
        data: {
          name:e.detail.value.name,//一些变量
        }
        ,
        method: 'POST',//请求方式
        header: {//请求头
          'Content-Type': 'application/x-www-form-urlencoded'
        },
        success: function (res) {
          console.log(res.data.msg)//默认返回的json字符串为res.data,你可以根据后台返回的字符串确定下一步

          } else {
            wx.showModal({
              title: '提示',
              content: '提交失败,请重新提交!',
            })

          }
         
          
         
        },
        fail:function(res){
          wx.showModal({
            title: '提示',
            content: '提交失败,请重新提交!',
          })

        }
      })
 ```
 
 
 **index.wxml主要就是添加函数的地方**
 以下代码可供参考：
 ```
 <view wx:for="{{array}}">//array为遍历数组，item默认为遍历的变量，此处index会默认为下标。
    <view id="{{item}}" bindtap="itemtap" class="itemview">{{item}}</view>
  </view>//itemtap为js中的函数名
 ```
 
 
 **index.wxss主要就是添加页面样式的地方**
 
 ```
 page{
  font-size: 32rpx; 
  margin: 0px; 
/*下面的是关键的设置100%显示*/ 
  background-size: 100% 100%;
   opacity:1;
   height: 812px;
}
.itemview {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding:20rpx;
  border-bottom: 1px solid #b1b1b1; //这里的颜色你选中就会出现颜色选择
}
```
 
 简单的介绍就是这了.
 具体项目地址：https://github.com/xxbd/red